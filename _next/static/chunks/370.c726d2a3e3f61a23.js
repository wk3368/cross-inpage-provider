(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[370],{478:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return b}});var r=t(4051),o=t.n(r),c=t(5893),a=t(7294),i=t(9917),s=t(2845),u=t(780),l=t.n(u),f=t(7191),d=t.n(f);function p(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function h(n,e,t,r,o,c,a){try{var i=n[c](a),s=i.value}catch(u){return void t(u)}i.done?e(s):Promise.resolve(s).then(r,o)}function g(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var c=n.apply(e,t);function a(n){h(c,r,o,a,i,"next",n)}function i(n){h(c,r,o,a,i,"throw",n)}a(void 0)}))}}function v(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,c=[],a=!0,i=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(c.push(r.value),!e||c.length!==e);a=!0);}catch(s){i=!0,o=s}finally{try{a||null==t.return||t.return()}finally{if(i)throw o}}return c}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return p(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=(0,i.Wf)("devnet"),y=new i.nh("GWYfd2h4UhEb3hTj52M5jc6aefCKN2thnUkc5uk924kr");function b(){var n=function(){var n=(0,a.useState)(),e=n[0],t=n[1];return(0,a.useEffect)((function(){var n=new s.i({});window._solana=n,t(n)}),[]),e}(),e=(0,a.useMemo)((function(){return new i.ew(x)}),[]),t=(0,a.useState)(!1)[1],r=(0,a.useState)(null),u=r[0],f=r[1];if((0,a.useEffect)((function(){if(n)return n.connect({onlyIfTrusted:!0}).catch((function(n){})),n.on("connect",(function(n){f(n),t(!0),console.log("[connect] ".concat(n.toBase58()))})),n.on("disconnect",(function(){f(null),t(!1),console.log("[disconnect] \ud83d\udc4b")})),n.on("accountChanged",(function(e){f(e),e?console.log("[accountChanged] Switched account to ".concat(null===e||void 0===e?void 0:e.toBase58())):(console.log("[accountChanged] Switched unknown account"),n.connect().then((function(){return console.log("[accountChanged] Reconnected successfully")})).catch((function(n){console.log("[accountChanged] Failed to re-connect: ".concat(n.message))})))})),function(){n.disconnect()}}),[n]),!n)return(0,c.jsx)("h2",{children:"Could not find a provider"});var p=function(){var e=g(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.connect();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn(e.t0),console.log("[error] connect: ".concat(JSON.stringify(e.t0)));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=g(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.disconnect();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn(e.t0),console.log("[error] disconnect: ".concat(JSON.stringify(e.t0)));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),b=function(){if(n.publicKey){var e=(new i.YW).add(i.yc.transfer({fromPubkey:n.publicKey,toPubkey:y,lamports:i.j5/100}));return e.feePayer=n.publicKey,e.recentBlockhash="GLXLbuzf788BVk738RKcgNWftzGHwjzXzVPAxFDt8naQ",e}},w=function(){var t=g(o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.publicKey){t.next=2;break}return t.abrupt("return");case 2:return console.log("Requesting airdrop"),t.next=5,e.requestAirdrop(n.publicKey,i.j5);case 5:return r=t.sent,console.log("Waiting for airdrop..."),t.next=9,e.confirmTransaction(r);case 9:console.log("Airdrop confirmed!");case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=g(o().mark((function t(){var r,c,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=b()){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.signAndSendTransaction(r);case 6:return c=t.sent.signature,console.log("Submitted transaction, signature: ",c),console.log("Awaiting confirmation"),t.next=11,e.confirmTransaction(c);case 11:a=t.sent,console.log("Transaction confirmed: ",a),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.warn(t.t0),console.log("[error] sendTransaction: ".concat(JSON.stringify(t.t0)));case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var e=g(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=b()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.signTransaction(t);case 6:r=e.sent,console.log("Signed transaction: ",d().encode(r.serialize())),console.info("Verify signature: ",r.verifySignatures()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.warn(e.t0),console.log("[error] signTransaction: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=g(o().mark((function e(){var t,r,c,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=v,e.next=4,Promise.all([b(),b()]);case 4:if(e.t1=e.sent,t=(0,e.t0)(e.t1,2),r=t[0],c=t[1],!r||!c){e.next=14;break}return e.next=11,n.signAllTransactions([r,c]);case 11:a=e.sent,console.log("signMultipleTransactions txns: ",a),a.forEach((function(n){return console.info("Verify signature: ",n.verifySignatures())}));case 14:e.next=20;break;case 16:e.prev=16,e.t2=e.catch(0),console.warn(e.t2),console.log("[error] signMultipleTransactions: ",e.t2);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=g(o().mark((function e(){var t,r,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Hello, world!",e.prev=1,t=(new TextEncoder).encode("Hello, world!"),e.next=5,n.signMessage(t,"hex");case 5:if((r=e.sent).signature){e.next=8;break}return e.abrupt("return");case 8:console.log("Message signed: ",r),c=l().sign.detached.verify(t,r.signature,r.publicKey.toBytes()),console.log("Message verified: ",c),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.warn(e.t0),console.log("[error] signMessage: ",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)("div",{children:[!n&&(0,c.jsx)("a",{href:"https://onekey.so/plugin",children:"Install OneKey Extension \u2192"}),(0,c.jsx)("main",{children:n&&u?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("pre",{children:["Network: ",x]}),(0,c.jsxs)("pre",{children:["Connected as: ",u.toBase58()]})]}),(0,c.jsx)("button",{onClick:w,children:"Request Airdrop"}),(0,c.jsx)("button",{onClick:k,children:"Sign&Send Transaction"}),(0,c.jsx)("button",{onClick:m,children:"Sign Transaction "}),(0,c.jsx)("button",{onClick:j,children:"Sign All Transactions"}),(0,c.jsx)("button",{onClick:S,children:"Sign Message"}),(0,c.jsx)("button",{onClick:function(){return h()},children:"Disconnect"})]}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("button",{onClick:function(){return p()},children:"Connect to OneKey"})})})]})}},1922:function(){},6601:function(){},9214:function(){},5024:function(){}}]);
//# sourceMappingURL=370.c726d2a3e3f61a23.js.map